<!--책자_프리셋2_100108-->
<div style="width:560px; min-height:500px;padding-bottom:40px;">
	<div class="estimateq">
		<div class="estimateC">
        
			<!--est_title-->
			<!--{ ? OrderMemoArr[98] == 'Y' }-->
			<div class="box">
				<table cellpadding="0" cellspacing="0" class="estTable2">
					<colgroup>
						<col class="inp-w-80" /><col width="*" />
					</colgroup>
					<tbody>
					<tr>
						<th>{=__text("주문 제목")}</th>
						<td><input type="text" class="textType inp-w-300" name="est_title" value="{est_title}" /></td>
					</tr>
				</tbody>
				</table>
			</div>
			<div class="space"> </div>
			<!--{ / }-->				

				<!--기본 규격-->
				<div class="box">
					<h3 class="est_title">{=__text("기본")}</h3>
					<table cellpadding="0" cellspacing="0" class="estTable">
						<colgroup>
							<col class="inp-w-80" /><col width="*" />
						</colgroup>
						<tbody>
						<tr>
							<th><span name="item_select_DOCUMENT_1">{adminExtraOption->getDisplayName("1")}</span></th>
						  	<td>{adminExtraOption->MakeSelectOptionTag("1","","documentOnchange","inp-w-80")}</td>
						</tr>
						<tr>
							<th>{=__text("수량")}</th>
						  	<td>
								<span>{adminExtraOption->MakeUnitCntSelect(goodsno)}</span>
								<!--수량(입력)-->
								<span><input type="text" id="input_unit_order_cnt" name="input_unit_order_cnt" class="textType" /></span>
								<!--수량(단위)-->
								<span name="unit_order_cnt">{adminExtraOption->getUserCntName(goodsno, "OCNT", "Y")}</span>
							</td>
						</tr>		
						</tbody>
					</table>
				</div>
				<div class="space"> </div>

				<!--표지-->				
				<div class="box">
					<h3 class="est_title">{=__text("표지")}</h3>
					<div id="option_item_select_C-PP">					
					<table cellpadding="0" cellspacing="0" class="estTable">
						<colgroup>
							<col class="inp-w-80" /><col width="*" />
						</colgroup>						
						<tbody>							
						<tr>
							<th><span name="item_select_C-PP_1">{adminExtraOption->getDisplayName("2")}</span></th>
							<td class="won_area">								
								{adminExtraOption->MakePageSelectOption(preset, "C-FIX")}
							  	<span class="won">
									<span class="price-view">
										<input type='hidden' name='option_supply_price_C-PP' id='option_supply_price_C-PP'>
										<input type='hidden' name='option_price_C-PP' id='option_price_C-PP'>
										<div id='price_text_C-PP'>0{=__text("원")}</div>
									</span>			  		
							  	</span>								
							</td>
						</tr>						
						</tbody>
					</table>
					</div>
					<div id="option_item_select_C-OP">					
					<table cellpadding="0" cellspacing="0" class="estTable1">
						<colgroup>
							<col class="inp-w-80" /><col width="*" />
						</colgroup>
						<tbody>							
						<!--{ ? adminExtraOption->getOptionKindUse("17") !== 'N' }-->
						<tr>
							<th><span name="item_select_PT_17">{adminExtraOption->getDisplayName("17")}</span></th>
							<td>{adminExtraOption->MakeSelectOptionTag("17","","forwardAction","inp-w-150")}</td>
						</tr>
						<!--{ / }-->
						<!--{ ? adminExtraOption->getOptionKindUse("18") !== 'N' }-->
						<tr>
							<th><span name="item_select_IC_18">{adminExtraOption->getDisplayName("18")}</span></th>
							<td>{adminExtraOption->MakeSelectOptionTag("18","","forwardAction","inp-w-150")}</td>
						</tr>
						<!--{ / }-->						
						<!--{ ? adminExtraOption->getOptionKindUse("19") !== 'N' }-->
						<tr>
							<th><span name="item_select_CT_19">{adminExtraOption->getDisplayName("19")}</span></th>
							<td>{adminExtraOption->MakeSelectOptionTag("19","","forwardAction","inp-w-150")}</td>
						</tr>
						<!--{ / }-->		
						<!--{ ? adminExtraOption->getOptionKindUse("20") !== 'N' }-->
						<tr>
							<th><span name="item_select_ET_20">{adminExtraOption->getDisplayName("20")}</span></th>
							<td>{adminExtraOption->MakeSelectOptionTag("20","","forwardAction","inp-w-150")}</td>
						</tr>
						<!--{ / }-->
						<tr>
							<th>&nbsp;<span>{adminExtraOption->MakeOrderCntDisplayName(goodsno,"C-OCNT")}</span></th>
							<td class="won_area">
								<span>{adminExtraOption->MakeOrderCntSelect(goodsno, "C-OCNT","order_cnt_select_C-OCNT")}</span>
								<!--표지수량(입력)-->
								<span><input class="textType" type="text" id="input_order_cnt_select_C-OCNT" name="input_order_cnt_select_C-OCNT" /></span>
								<!--표지수량(단위)-->
								<span name="C-OCNT">{adminExtraOption->getUserCntName(goodsno, "C-OCNT")}</span>
							  	<span class="won">
									<span class="price-view">
										<input type='hidden' name='option_supply_price_C-OP' id='option_supply_price_C-OP'>
										<input type='hidden' name='option_price_C-OP' id='option_price_C-OP'>
										<div id='price_text_C-OP'>0{=__text("원")}</div>
									</span>			  		
							  	</span>
							</td>
						</tr>
						</tbody>
					</table>
					</div>					
				</div>
				<div class="space"> </div>				

				<!--내지-->
				<div id="page-area" addcount="0">
					<div class="box">
						<h3 class="est_title">{=__text("내지")}
							<span class="optmode_detail">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
								<!--{ ? OrderMemoArr[96] == 'Y' }-->
								<input type="checkbox" name="chk_item_select_M-PP_0" id="chk_item_select_M-PP_0" onclick="onVisiblePageOption('M-PP')" value="M-PP" />{=__text("면지")}
								<!--{ / }-->
								<!--{ ? OrderMemoArr[97] == 'Y' }-->
								<input type="checkbox" name="chk_item_select_G-PP_0" id="chk_item_select_G-PP_0" onclick="onVisiblePageOption('G-PP')" value="G-PP" />{=__text("간지")}
								<!--{ / }-->
							</span>							
							<span class="type blue"><a href="javascript:;" onclick="addOptionPage();">+ {=__text("내지추가")}</a></span>
						</h3>
						<div id="option_item_select_PP">
						<table cellpadding="0" cellspacing="0" class="estTable">
							<colgroup>
								<col class="inp-w-80" /><col width="*" />
							</colgroup>						
							<tbody>							
							<tr>
								<th><span name="item_select_PP_1">{adminExtraOption->getDisplayName("21")}</span></th>
								<td class="won_area">								
									{adminExtraOption->MakePageSelectOption(preset, "F-FIX")}
								  	<span class="won">
										<span class="price-view">
											<input type='hidden' name='option_supply_price_PP' id='option_supply_price_PP'>
											<input type='hidden' name='option_price_PP' id='option_price_PP'>
											<div id='price_text_PP'>0{=__text("원")}</div>
										</span>			  		
								  	</span>								
								</td>
							</tr>						
							</tbody>
						</table>
						</div>
						<div id="option_item_select_OP">					
						<table cellpadding="0" cellspacing="0" class="estTable1">
							<colgroup>
								<col class="inp-w-80" /><col width="*" />
							</colgroup>
							<tbody>							
							<!--{ ? adminExtraOption->getOptionKindUse("36") !== 'N' }-->
							<tr>
								<th><span name="item_select_PT_36">{adminExtraOption->getDisplayName("36")}</span></th>
								<td>{adminExtraOption->MakeSelectOptionTag("36","","forwardAction","inp-w-150")}</td>
							</tr>
							<!--{ / }-->
							<!--{ ? adminExtraOption->getOptionKindUse("37") !== 'N' }-->
							<tr>
								<th><span name="item_select_IC_37">{adminExtraOption->getDisplayName("37")}</span></th>
								<td>{adminExtraOption->MakeSelectOptionTag("37","","forwardAction","inp-w-150")}</td>
							</tr>
							<!--{ / }-->						
							<!--{ ? adminExtraOption->getOptionKindUse("38") !== 'N' }-->
							<tr>
								<th><span name="item_select_CT_38">{adminExtraOption->getDisplayName("38")}</span></th>
								<td>{adminExtraOption->MakeSelectOptionTag("38","","forwardAction","inp-w-150")}</td>
							</tr>
							<!--{ / }-->		
							<!--{ ? adminExtraOption->getOptionKindUse("39") !== 'N' }-->
							<tr>
								<th><span name="item_select_ET_39">{adminExtraOption->getDisplayName("39")}</span></th>
								<td>{adminExtraOption->MakeSelectOptionTag("39","","forwardAction","inp-w-150")}</td>
							</tr>
							<!--{ / }-->
							<tr>
								<th>&nbsp;<span>{adminExtraOption->MakeOrderCntDisplayName(goodsno,"OCNT")}</span></th>
								<td class="won_area">
									<span>{adminExtraOption->MakeOrderCntSelect(goodsno,"OCNT","order_cnt_select_OCNT","false")}</span>
									<!--내지수량(입력)-->
									<span><input class="textType" type="text" id="input_order_cnt_select_OCNT" name="input_order_cnt_select_OCNT" /></span>
									<!--내지수량(단위)-->
									<span name="OCNT">{adminExtraOption->getUserCntName(goodsno, "OCNT")}</span>
								  	<span class="won">
										<span class="price-view">
											<input type='hidden' name='option_supply_price_OP' id='option_supply_price_OP'>
											<input type='hidden' name='option_price_OP' id='option_price_OP'>
											<div id='price_text_OP'>0{=__text("원")}</div>
										</span>			  		
								  	</span>
								</td>
							</tr>
							</tbody>
						</table>
						</div>					
					</div>
					<div class="space"> </div>						
				</div>				

				<!--면지-->
				<!--{ ? OrderMemoArr[96] == 'Y' }-->
				<div id="page_option_M-PP" style="display:none;">
					<div class="box">
						<h3 class="est_title">{=__text("면지")}</h3>
						<div id="option_item_select_M-PP">					
						<table cellpadding="0" cellspacing="0" class="estTable">
							<colgroup>
								<col class="inp-w-80" /><col width="*" />
							</colgroup>						
							<tbody>							
							<tr>
								<th><span name="item_select_M-PP_1">{adminExtraOption->getDisplayName("40")}</span></th>
								<td class="won_area">								
									{adminExtraOption->MakePageSelectOption(preset, "M-FIX")}
								  	<span class="won">
										<span class="price-view">
											<input type='hidden' name='option_supply_price_M-PP' id='option_supply_price_M-PP'>
											<input type='hidden' name='option_price_M-PP' id='option_price_M-PP'>
											<div id='price_text_M-PP'>0{=__text("원")}</div>
										</span>			  		
								  	</span>								
								</td>
							</tr>						
							</tbody>
						</table>
						</div>
						<div id="option_item_select_M-OP">					
						<table cellpadding="0" cellspacing="0" class="estTable1">
							<colgroup>
								<col class="inp-w-80" /><col width="*" />
							</colgroup>
							<tbody>							
							<!--{ ? adminExtraOption->getOptionKindUse("55") !== 'N' }-->
							<tr>
								<th><span name="item_select_PT_55">{adminExtraOption->getDisplayName("55")}</span></th>
								<td>{adminExtraOption->MakeSelectOptionTag("55","","forwardAction","inp-w-150")}</td>
							</tr>
							<!--{ / }-->
							<!--{ ? adminExtraOption->getOptionKindUse("56") !== 'N' }-->
							<tr>
								<th><span name="item_select_IC_56">{adminExtraOption->getDisplayName("56")}</span></th>
								<td>{adminExtraOption->MakeSelectOptionTag("56","","forwardAction","inp-w-150")}</td>
							</tr>
							<!--{ / }-->						
							<!--{ ? adminExtraOption->getOptionKindUse("57") !== 'N' }-->
							<tr>
								<th><span name="item_select_CT_57">{adminExtraOption->getDisplayName("57")}</span></th>
								<td>{adminExtraOption->MakeSelectOptionTag("57","","forwardAction","inp-w-150")}</td>
							</tr>
							<!--{ / }-->		
							<!--{ ? adminExtraOption->getOptionKindUse("58") !== 'N' }-->
							<tr>
								<th><span name="item_select_ET_58">{adminExtraOption->getDisplayName("58")}</span></th>
								<td>{adminExtraOption->MakeSelectOptionTag("58","","forwardAction","inp-w-150")}</td>
							</tr>
							<!--{ / }-->
							<tr>
								<th>&nbsp;<span>{adminExtraOption->MakeOrderCntDisplayName(goodsno,"M-OCNT")}</span></th>
								<td class="won_area">
									<span>{adminExtraOption->MakeOrderCntSelect(goodsno, "M-OCNT","order_cnt_select_M-OCNT")}</span>
									<!--면지수량(입력)-->
									<span><input class="textType" type="text" id="input_order_cnt_select_M-OCNT" name="input_order_cnt_select_M-OCNT" /></span>
									<!--면지수량(단위)-->
									<span name="M-OCNT">{adminExtraOption->getUserCntName(goodsno, "M-OCNT")}</span>
								  	<span class="won">
										<span class="price-view">
											<input type='hidden' name='option_supply_price_M-OP' id='option_supply_price_M-OP'>
											<input type='hidden' name='option_price_M-OP' id='option_price_M-OP'>
											<div id='price_text_M-OP'>0{=__text("원")}</div>
										</span>			  		
								  	</span>
								</td>
							</tr>
							</tbody>
						</table>
						</div>					
					</div>
					<div class="space"> </div>
				</div>
				<!--{ / }-->
					
				<!--간지-->
				<!--{ ? OrderMemoArr[97] == 'Y' }-->
				<div id="page_option_G-PP" style="display:none;">
					<div class="box">
						<h3 class="est_title">{=__text("간지")}</h3>
						<div id="option_item_select_G-PP">					
						<table cellpadding="0" cellspacing="0" class="estTable">
							<colgroup>
								<col class="inp-w-80" /><col width="*" />
							</colgroup>						
							<tbody>							
							<tr>
								<th><span name="item_select_G-PP_1">{adminExtraOption->getDisplayName("59")}</span></th>
								<td class="won_area">								
									{adminExtraOption->MakePageSelectOption(preset, "G-FIX")}
								  	<span class="won">
										<span class="price-view">
											<input type='hidden' name='option_supply_price_G-PP' id='option_supply_price_G-PP'>
											<input type='hidden' name='option_price_G-PP' id='option_price_G-PP'>
											<div id='price_text_G-PP'>0{=__text("원")}</div>
										</span>			  		
								  	</span>								
								</td>
							</tr>						
							</tbody>
						</table>
						</div>
						<div id="option_item_select_G-OP">					
						<table cellpadding="0" cellspacing="0" class="estTable1">
							<colgroup>
								<col class="inp-w-80" /><col width="*" />
							</colgroup>
							<tbody>							
							<!--{ ? adminExtraOption->getOptionKindUse("74") !== 'N' }-->
							<tr>
								<th><span name="item_select_PT_74">{adminExtraOption->getDisplayName("74")}</span></th>
								<td>{adminExtraOption->MakeSelectOptionTag("74","","forwardAction","inp-w-150")}</td>
							</tr>
							<!--{ / }-->
							<!--{ ? adminExtraOption->getOptionKindUse("75") !== 'N' }-->
							<tr>
								<th><span name="item_select_IC_75">{adminExtraOption->getDisplayName("75")}</span></th>
								<td>{adminExtraOption->MakeSelectOptionTag("75","","forwardAction","inp-w-150")}</td>
							</tr>
							<!--{ / }-->						
							<!--{ ? adminExtraOption->getOptionKindUse("76") !== 'N' }-->
							<tr>
								<th><span name="item_select_CT_76">{adminExtraOption->getDisplayName("76")}</span></th>
								<td>{adminExtraOption->MakeSelectOptionTag("76","","forwardAction","inp-w-150")}</td>
							</tr>
							<!--{ / }-->		
							<!--{ ? adminExtraOption->getOptionKindUse("77") !== 'N' }-->
							<tr>
								<th><span name="item_select_ET_77">{adminExtraOption->getDisplayName("77")}</span></th>
								<td>{adminExtraOption->MakeSelectOptionTag("77","","forwardAction","inp-w-150")}</td>
							</tr>
							<!--{ / }-->
							<tr>
								<th>&nbsp;<span>{adminExtraOption->MakeOrderCntDisplayName(goodsno,"G-OCNT")}</span></th>
								<td class="won_area">
									<span>{adminExtraOption->MakeOrderCntSelect(goodsno, "G-OCNT","order_cnt_select_G-OCNT")}</span>
									<!--면지수량(입력)-->
									<span><input class="textType" type="text" id="input_order_cnt_select_G-OCNT" name="input_order_cnt_select_G-OCNT" /></span>
									<!--면지수량(단위)-->
									<span name="G-OCNT">{adminExtraOption->getUserCntName(goodsno, "G-OCNT")}</span>
								  	<span class="won">
										<span class="price-view">
											<input type='hidden' name='option_supply_price_G-OP' id='option_supply_price_G-OP'>
											<input type='hidden' name='option_price_G-OP' id='option_price_G-OP'>
											<div id='price_text_G-OP'>0{=__text("원")}</div>
										</span>			  		
								  	</span>
								</td>
							</tr>
							</tbody>
						</table>
						</div>					
					</div>
					<div class="space"> </div>	
				</div>					
				<!--{ / }-->

				<!--후가공-->
				<div id="after_option" class="box">
					<h3 class="est_title">{=__text("후가공")}</h3>	
					<table cellpadding="0" cellspacing="0" class="estTable">
						<colgroup><col class="inp-w-120" /><col width="*" /></colgroup>
						<tbody>
						<!--{ @ afterOptionSelectArr }-->
								
						<tr>
							<th>
								<input type="checkbox" name="chk_item_select_{.code}_0" id="chk_item_select_{.code}_0" onclick="onClickChkAfterOption();" />
								<span name="item_select_{.code}_{.optionKindIndex}">{.name}</span>								
							</th>
							<td class="won_area">
								<div id="option_item_select_{.code}">		
								{adminExtraOption->MakeSelectOptionTag(.optionKindIndex,"","forwardAction","inp-w-150")}&nbsp;{=AfterOptionHelpInfo(.code)}
							  	<span class="won">
									<span class="price-view">
										<input type='hidden' name='option_supply_price_{.code}' id='option_supply_price_{.code}'>
										<input type='hidden' name='option_price_{.code}' id='option_price_{.code}'>
										<div id='price_text_{.code}'>0{=__text("원")}</div>
									</span>			  		
							  	</span>
								</div>	  	
							</td>
						</tr>
						
						<!--{ / }-->	
						</tbody>
					</table>
				</div>
				<div class="space"> </div>
							
			<!--price box-->
			<div class="estBox type3 price-view">
				<div>
					<span class="amount" id="select_option_sum" >0 {=__text("원")}</span>
					<!--{? horizon_view_flag == "1" }--><!--2단가로상품보이기--><br><!--{ / }-->
					<span class="amount2" id="select_option_sum_desc">0 {=__text("원")}</span>
				</div>
				<input type="hidden" id="select_option_supply_price" name="select_option_supply_price" />
	        	<input type="hidden" id="select_option_sum_price" name="select_option_sum_price" />
			</div>
			<div class="space"> </div>
			
			<!--est_order_memo-->
			<!--{ ? OrderMemoArr[99] == 'Y' }-->
			<div class="box">
				<table cellpadding="0" cellspacing="0" class="estTable2">
					<colgroup>
						<col class="inp-w-80" /><col width="*" />
					</colgroup>
					<tbody>
					<tr>
						<th>{=__text("주문 메모")}</th>
						<td><textarea name="est_order_memo" style="width: 300px;height: 60px;">{est_order_memo}</textarea></td>
					</tr>
				</tbody>
				</table>
			</div>
			<!--{ / }-->

			<div class="estbtn">
				<a href="javascript:;" onclick="initOrder('{order_type}', 'UPDATE')" class="estimate_btn"><span class="btn_05"></span>{=__text("주문하기")}</a>
			</div>
        
		</div>		
	</div>
</div>

<script type="text/javascript"> 
function addOptionPage() {
	//console.log('내지추가');
	var addcount = $('#page-area').attr('addcount');
	addcount++;
	var code = "PP-" + addcount;
	var code2 = "OP-" + addcount;
	var code3 = "OCNT-" + addcount; //수량
	
	var div = $('#page-cont').clone();
	div.attr('id',code);
	var html = div.html(); 
	html = html.replace(/\PPP/g,code);
	html = html.replace(/\OPP/g,code2);
	html = html.replace(/\ACNT/g,code3); //수량

	//group_code = FIXOPTION , SELOPTION
	var s = "FIX"+ code2 +"TION";
	var ss = "SEL"+ code2 +"TION";
	
	html = html.replace(new RegExp(s, 'gi'), "FIXOPTION");
	html = html.replace(new RegExp(ss, 'gi'), "SELOPTION");
	
	div.html(html);
	optino_group_code.push(code);
	optino_group_code.push(code2);
	//console.log("[add]optino_group_code: " + optino_group_code);
  	$("input[name='option_group_code']").val(optino_group_code.toString());
  	
	div.appendTo('#page-area');
	$('#page-area').attr('addcount',addcount);
	
	//내지 1~3차 option_kind_code가 replace되는 문제로 기존 내지항목으로 대체...
	$('#item_select_' + code + '_1').html($('#item_select_PP_1').html());
	$('#item_select_' + code + '_2').html($('#item_select_PP_2').html());
	$('#item_select_' + code + '_3').html($('#item_select_PP_3').html());
	
	//수량 사용자 직접 입력 관련 이벤트 처리
	$("#input_order_cnt_select_"+code3).each(function(){
		$(this).bind('focusout', function(){
			getRangeSelectCnt(this);
		});
		// onkeyup="this.value=number_filter(this.value);"
		$(this).bind('keyup', function(){
			this.value = number_filter(this.value);
		});
	});
	
	if('{adminExtraOption->getUserCntInputFlage(goodsno, "OCNT")}' == "Y")
		$("#order_cnt_select_"+code3).attr("style","display:none;");
	else
		$("#input_order_cnt_select_"+code3).attr("style","display:none;");
}

function delOptionPage(sender) {
	//console.log('내지삭제');
	var code = $(sender).attr('code');
	var code2 = $(sender).attr('code2');
	
	var gcode = optino_group_code.toString();
	gcode = gcode.replace(','+code, '');
	gcode = gcode.replace(','+code2, '');
	
	//optino_group_code = [gcode];
	optino_group_code = gcode.split(",");

  	$("input[name='option_group_code']").val(optino_group_code.toString());
	//$(sender).parent().parent().parent().parent().parent().remove();
	$('#option_item_select_'+ code).parent().remove();

	//#책자프리셋 후가공옵션 계산 방식 수정 2015.06.10 by kdk
	//2.추가된 모든 내지 수량을 합산한 총 페이지수에 따른 후가공 가격테이블을 계산합니다.
	//3.삭제된 내지 수량에 따라 후가공 가격테이블을 계산합니다.
	$("div[id^='after_option_item_select_']").each(function(){
		var id = $(this).attr("id");
		var code = id.replace("after_option_item_select_","");
		code = code.replace("_0","");
		
		priceAction(code);
	});

	//가격확인
	priceSum();
}

//내지추가
function addOption(code,addcount) {
	var div = $('#page-cont').clone();
	div.attr('id',code);
	var html = div.html(); 
	html = html.replace(/\PPP/g,code);
	html = html.replace(/\OPP/g,"OP-"+addcount);
	html = html.replace(/\ACNT/g,"OCNT-"+addcount); //수량

	//group_code = FIXOPTION , SELOPTION
	var s = "FIXOP-"+ addcount +"TION";
	var ss = "SELOP-"+ addcount +"TION";
	
	html = html.replace(new RegExp(s, 'gi'), "FIXOPTION");
	html = html.replace(new RegExp(ss, 'gi'), "SELOPTION");
	
	div.html(html);
	//console.log(div.html());
	
	div.appendTo('#page-area');
	$('#page-area').attr('addcount',addcount);
	
	//내지 1~3차 option_kind_code가 replace되는 문제로 기존 내지항목으로 대체...
	$('#item_select_' + code + '_1').html($('#item_select_PP_1').html());
	$('#item_select_' + code + '_2').html($('#item_select_PP_2').html());
	$('#item_select_' + code + '_3').html($('#item_select_PP_3').html());
	
	var code3 = "OCNT-" + addcount; //수량
	//수량 사용자 직접 입력 관련 이벤트 처리
	$("#input_order_cnt_select_"+code3).each(function(){
		$(this).bind('focusout', function(){
			getRangeSelectCnt(this);
		});
		// onkeyup="this.value=number_filter(this.value);"
		$(this).bind('keyup', function(){
			this.value = number_filter(this.value);
		});
	});
	
	if('{adminExtraOption->getUserCntInputFlage(goodsno, "OCNT")}' == "Y")
		$("#order_cnt_select_"+code3).attr("style","display:none;");
	else
		$("#input_order_cnt_select_"+code3).attr("style","display:none;");
	//수량 사용자 직접 입력 관련 이벤트 처리			
}
	
$(window).load(function(){
	//추가 내지를 위해 페이지 0 매를 추가한다.
	$('#page-cont #order_cnt_select_OCNT').prepend("<option value='0'>"+{=__java("선택")}+"</option>");

	var div = $('#page-cont');
	var html = div.html(); 
	html = html.replace(/\PP/g, "PPP");
	html = html.replace(/\OP/g, "OPP");
	html = html.replace(/\OCNT/g, "ACNT");
	
	div.html(html);

	//전체 수량
	$("#unit_order_cnt").removeAttr("onchange");
    $("#unit_order_cnt").change(function(){
    	//마지막 항목 가격을 기본적으로 뿌려준다.
  		//forwardOrderCntAction();
  		priceSum();
    });
    
    //sub select
	/*$("#item_select_C-PP_1").each(function(){
		forwardAction(this);
	});
	
	$("#item_select_PP_1").each(function(){
		forwardAction(this);
	});

	$("#item_select_M-PP_1").each(function(){
		forwardAction(this);
	});
	
	$("#item_select_G-PP_1").each(function(){
		forwardAction(this);
	});
	
	$("#item_select_PPP_1").each(function(){
		forwardAction(this);
	});*/
	//sub select

	//수량 사용자 직접 입력 관련 이벤트 처리
	$("input[name^='input_']").each(function(){
		//console.log($(this));
		$(this).val("1");
		$(this).attr("style","width: 30px;");
		$(this).bind('focusout', function(){
			getRangeSelectCnt(this);
		});
		// onkeyup="this.value=number_filter(this.value);"
		$(this).bind('keyup', function(){
			this.value = number_filter(this.value);
		});
	});

	//수량 사용자 직접 입력 창
	$("#input_unit_order_cnt").val($("#unit_order_cnt").val());
	$("select[name^='order_cnt_select_']").each(function(){
		//console.log($(this).attr("name"));
		$("#input_"+$(this).attr("name")).val($(this).val());
	});
	
	if('{adminExtraOption->getUserCntInputFlage(goodsno, "C-OCNT")}' == 'Y')
		$("#order_cnt_select_C-OCNT").attr("style","display:none;");
	else
		$("#input_order_cnt_select_C-OCNT").attr("style","display:none;");

	if('{adminExtraOption->getUserCntInputFlage(goodsno, "OCNT")}' == 'Y') {
		$("#unit_order_cnt").attr("style","display:none;");
		$("#order_cnt_select_OCNT").attr("style","display:none;");
		$("#order_cnt_select_ACNT").attr("style","display:none;");
	}
	else {
		$("#input_unit_order_cnt").attr("style","display:none;");
		$("#input_order_cnt_select_OCNT").attr("style","display:none;");
		$("#input_order_cnt_select_ACNT").attr("style","display:none;");
	}
	if('{adminExtraOption->getUserCntInputFlage(goodsno, "M-OCNT")}' == 'Y')
		$("#order_cnt_select_M-OCNT").attr("style","display:none;");
	else
		$("#input_order_cnt_select_M-OCNT").attr("style","display:none;");

	if('{adminExtraOption->getUserCntInputFlage(goodsno, "G-OCNT")}' == 'Y')
		$("#order_cnt_select_G-OCNT").attr("style","display:none;");
	else
		$("#input_order_cnt_select_G-OCNT").attr("style","display:none;");

	//////////수정하기 값설정//////////
	var json_data = '{orderOptionData}';
	var object = $.parseJSON(json_data);
	//console.log("json_data: " + json_data);
	$.each(object , function(key, value){
		//console.log(key + ": " + object [key]);
		
		//if($("#"+key))
		//	$("#"+key).val(object [key]);
			
		if(key == "option_group_code") { 
			group_code = object [key];
			$("input[name='option_group_code']").val(object [key]);
	  		//console.log($("input[name='option_group_code']").val());
	  	}
	});	

	//추가된 내지의 code를 찾아서 html을 생성한다.   
  	if(group_code !== "") {
  		var add_max = 0;
  		group_code = group_code.replace(optino_group_code.toString(),"");
  		
  		add_group_code = group_code.split(',');
  		add_group_code.sort();
		//console.log(add_group_code);
		
  		for(i=0; i<add_group_code.length;i++) {
  			if(add_group_code[i] !== "") {
  				//console.log(add_group_code[i]);
  				if (add_group_code[i].indexOf('PP-') > -1) {
					var n = add_group_code[i].replace("PP-","");
					//console.log("n : "+n);
					addOption(add_group_code[i],n);
					
					if(n > add_max) add_max = n;
				}
				optino_group_code.push(add_group_code[i]);
  			}
  		}
		
		//console.log("optino_group_code : "+optino_group_code);
		$('#page-area').attr('addcount',add_max);
  	}

  	//값 설정
	$.each(object , function(key, value){
		//console.log(key + ": " + object [key]);
		
		//면지,간지,후가공 선택 표시해주기.
		if (key.indexOf('chk_') > -1) {
			//console.log(key + ": " + object [key]);
			if(object [key] == "Y") {
				$("#"+key).attr("checked", true);
				onVisibleAfterOption(key.replace("chk_",""));
				
				//면지,간지 선택 표시해주기
				if(key == "chk_item_select_M-PP_0")
					onVisiblePageOption("M-PP");
				if(key == "chk_item_select_G-PP_0")
					onVisiblePageOption("G-PP");
			}
			else $("#"+key).attr("checked", false);
		}
		
		//용지 값 설정 넘김.
		if (key.indexOf('item_select_C-PP_') > -1) return true;
		if (key.indexOf('item_select_PP') > -1) return true;
		if (key.indexOf('item_select_PP-') > -1) return true;
		if (key.indexOf('item_select_M-PP_') > -1) return true;
		if (key.indexOf('item_select_G-PP_') > -1) return true;

		if($("#"+key)) {
			$("#"+key).val(object [key]);

			//console.log("=" + key + ": " + $("#"+key).val());

			//수량 사용자 직접 입력 창 값 설정.
			if (key.indexOf('order_cnt_select_') > -1) {
      			$("#input_"+key).val(object [key]);
    		}
		}
	});

	//용지값 설정
	$("#item_select_C-PP_1").each(function(){
		$(this).val(object["item_select_C-PP_1"]);
		forwardAction(this);
	});

	$("#item_select_PP_1").each(function(){
		$(this).val(object["item_select_PP_1"]);
		forwardAction(this);
	});

	$("#item_select_M-PP_1").each(function(){
		$(this).val(object["item_select_M-PP_1"]);
		forwardAction(this);
	});

	$("#item_select_G-PP_1").each(function(){
		$(this).val(object["item_select_G-PP_1"]);
		forwardAction(this);
	});

	//추가내지 용지 값설정.
	//console.log("add_group_code : "+add_group_code);
	for(i=0; i<add_group_code.length;i++) {
		if(add_group_code[i] !== "") {
			//console.log("add_group_code[i] : "+add_group_code[i]);
			$("#item_select_"+add_group_code[i]+"_1").each(function(){
				$(this).val(object["item_select_"+add_group_code[i]+"_1"]);
				forwardAction(this);
			});
		}
	}

	//규격 설정
	$("select[option_group_type='DOCUMENT']").each(function(){
		//console.log(document_size);
		var document_x = $("input[id='document_x'][option_group_type='DOCUMENT'][code='DOCUMENT']");
		var document_y = $("input[id='document_y'][option_group_type='DOCUMENT'][code='DOCUMENT']");
		
		//console.log(document_x);
		//console.log(document_y);
		//console.log($(document_x).is("input"));
		//console.log($(document_y).is("input"));

		if (!$(document_x).is("input")) document_x = $("input[id='document_x'][option_group_type='DOCUMENT']");
		if (!$(document_y).is("input")) document_y = $("input[id='document_y'][option_group_type='DOCUMENT']");
		
    	$(document_x).attr("readonly",false);
    	$(document_y).attr("readonly",false);

    	for(document_key in document_size) {

			if($("select[option_group_type='DOCUMENT']").val() == {=__java("비규격")}) {
				$(document_x).val("");
				$(document_y).val("");
			}    		
    						
			if (document_key == $("select[option_group_type='DOCUMENT']").val()) {
				
    			$(document_x).val(document_size[document_key].substr(0, document_size[document_key].indexOf('x')));
    			$(document_y).val(document_size[document_key].substr(document_size[document_key].indexOf('x')+1, document_size[document_key].length));
				
				if ($(document_x).val())
					$(document_x).attr("readonly",true);
				
				if ($(document_y).val())
					$(document_y).attr("readonly",true);
			}
		}
	});
	//////////수정하기 값설정//////////

	//마지막 항목 가격을 기본적으로 뿌려준다.
	forwardOrderCntAction();
});
</script>
<!--내지추가-->
<div style="display: none;">
	<div id="page-cont">
		<div class="box">
			<h3 class="est_title">{=__text("추가 내지")}
				<span class="type red"><a href="javascript:;" onclick="delOptionPage(this);" code="PP">+ {=__text("내지삭제")}</a></span>
			</h3>
			<div id="option_item_select_PP">
			<table cellpadding="0" cellspacing="0" class="estTable">
				<colgroup>
					<col class="inp-w-80" /><col width="*" />
				</colgroup>						
				<tbody>							
				<tr>
					<th><span name="item_select_PP_1">{adminExtraOption->getDisplayName("21")}</span></th>
					<td class="won_area">								
						{adminExtraOption->MakePageSelectOption(preset, "F-FIX")}
					  	<span class="won">
							<span class="price-view">
								<input type='hidden' name='option_supply_price_PP' id='option_supply_price_PP'>
								<input type='hidden' name='option_price_PP' id='option_price_PP'>
								<div id='price_text_PP'>0{=__text("원")}</div>
							</span>			  		
					  	</span>								
					</td>
				</tr>						
				</tbody>
			</table>
			</div>
			<div id="option_item_select_OP">					
			<table cellpadding="0" cellspacing="0" class="estTable1">
				<colgroup>
					<col class="inp-w-80" /><col width="*" />
				</colgroup>
				<tbody>							
				<!--{ ? adminExtraOption->getOptionKindUse("36") !== 'N' }-->
				<tr>
					<th><span name="item_select_PT_36_OP">{adminExtraOption->getDisplayName("36")}</span></th>
					<td>{adminExtraOption->MakeSelectOptionTagAddPage("36","","forwardAction","inp-w-150")}</td>
				</tr>
				<!--{ / }-->
				<!--{ ? adminExtraOption->getOptionKindUse("37") !== 'N' }-->
				<tr>
					<th><span name="item_select_IC_37_OP">{adminExtraOption->getDisplayName("37")}</span></th>
					<td>{adminExtraOption->MakeSelectOptionTagAddPage("37","","forwardAction","inp-w-150")}</td>
				</tr>
				<!--{ / }-->						
				<!--{ ? adminExtraOption->getOptionKindUse("38") !== 'N' }-->
				<tr>
					<th><span name="item_select_CT_38_OP">{adminExtraOption->getDisplayName("38")}</span></th>
					<td>{adminExtraOption->MakeSelectOptionTagAddPage("38","","forwardAction","inp-w-150")}</td>
				</tr>
				<!--{ / }-->		
				<!--{ ? adminExtraOption->getOptionKindUse("39") !== 'N' }-->
				<tr>
					<th><span name="item_select_ET_39_OP">{adminExtraOption->getDisplayName("39")}</span></th>
					<td>{adminExtraOption->MakeSelectOptionTagAddPage("39","","forwardAction","inp-w-150")}</td>
				</tr>
				<!--{ / }-->
				<tr>
					<th>&nbsp;<span>{adminExtraOption->MakeOrderCntDisplayName(goodsno,"OCNT")}</span></th>
					<td class="won_area">
						<span>{adminExtraOption->MakeOrderCntSelect(goodsno,"OCNT","order_cnt_select_OCNT","false")}</span>
						<!--내지수량(입력)-->
						<span><input class="textType" type="text" id="input_order_cnt_select_OCNT" name="input_order_cnt_select_OCNT" /></span>
						<!--내지수량(단위)-->
						<span name="OCNT">{adminExtraOption->getUserCntName(goodsno, "OCNT")}</span>
					  	<span class="won">
							<span class="price-view">
								<input type='hidden' name='option_supply_price_OP' id='option_supply_price_OP'>
								<input type='hidden' name='option_price_OP' id='option_price_OP'>
								<div id='price_text_OP'>0{=__text("원")}</div>
							</span>			  		
					  	</span>
					</td>
				</tr>
				</tbody>
			</table>
			</div>					
		</div>
		<div class="space"> </div>	
	</div>
</div>
<!--내지추가-->
		